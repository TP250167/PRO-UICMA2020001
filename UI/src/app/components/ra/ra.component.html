<div class="cc-page-title">
    <h2>Reasonable Assurance Notification Management</h2>
    <div class="text-right Notification-button">
    <button class="btn btn-primary" (click)="aps.openModal(checkAttachment)">Create Batch</button>
    </div>
</div>
<div class="container-fluid cc-pad-zero">
    <div class="row">
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-body">
                    
                    <h3 class="card-title mb-3">
                        <span class="badge badge-primary">Notification Schedules</span>
                    </h3>

                    <div class="cc-task-list">
                        <accordion [isAnimated]="true" [closeOthers]="true">

                            <accordion-group *ngFor="let item of schedulesList">
                                <button (click)="getBatchesDetails(item.id)" class="btn btn-link" accordion-heading type="button">
                                    <div class="cc-list-icon"> <span><i class="fa fa-check"></i></span> </div>
                                    <div class="cc-tla-heading">{{item.batchName}}</div>
                                </button>
                                <!-- <div class="cc-accordion-content">
                                    <ul>
                                        <li><i class="fa fa-envelope"></i>1900321- Awaiting for call from 16Dec, 2018</li>
                                        <li><i class="fa fa-envelope"></i>1900330- Awaiting for call from 24Dec, 2018</li>
                                        <li><i class="fa fa-envelope"></i>1900321- Response Pending for call from 16Dec, 2018</li>
                                        <li><i class="fa fa-envelope"></i>1900321- Response Pending for call from 16Dec, 2018</li>
                                    </ul>
                                </div> -->
                            </accordion-group>

                            <!-- <accordion-group>
                                <button class="btn btn-link" accordion-heading type="button">
                                    <div class="cc-list-icon"> <span><i class="fa fa-cog"></i></span> </div>
                                    <div class="cc-tla-heading">Other RA Notification Batch</div>
                                </button>
                                <div class="cc-accordion-content">
                                    <ul>
                                        <li><i class="fa fa-envelope"></i>1900330- Awaiting for call from 24Dec, 2018</li>
                                        <li><i class="fa fa-envelope"></i>1900321- Response Pending for call from 16Dec, 2018</li>
                                    </ul>
                                </div>
                            </accordion-group> -->
                        
                        </accordion>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title mb-3">
                        <span class="badge badge-primary">Notification Logs</span>
                    </h3>
                    <div class="card-content">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <td>Batch Name</td>
                                    <td (click)="gotoNotificationLogs(batchDetails.id)"><span class="cc-text-link">{{batchDetails.batch_Name}}</span></td>
                                </tr>
                                <tr>
                                    <td>Batch Description</td>
                                    <td>{{batchDetails.batch_Description}}</td>
                                </tr>
                                <tr>
                                    <td>Status</td>
                                    <td>{{batchDetails.status}}</td>
                                </tr>
                                <tr>
                                    <td>Total Recipient</td>
                                    <td>{{batchDetails.total_Recipient}}</td>
                                </tr>
                                <tr>
                                    <td>Schedule Date</td>
                                    <td>{{batchDetails.schedule_Date | date:'MM/dd/yyyy'}}</td>
                                </tr>
                                <tr>
                                    <td>Successful Delivery</td>
                                    <td>{{batchDetails.sucessful_Delivery}}</td>
                                </tr>
                                <tr>
                                    <td>Failed Delivery</td>
                                    <td>{{batchDetails.failed_Delivery}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- <h3 class="card-content-title">Batch Name</h3>
                        <a (click)="gotoNotificationLogs()">Summer Break RA Notification Batch</a> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #checkAttachment>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Add RA Batch Detail</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="aps.closeModel()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form appFormInputFocus [formGroup]="batchInitiateForm" 
    (ngSubmit)="submitBatchInitiateForm()">
    <div class="modal-body">
        <div class="cc-form-section">
                <div class="form-row">
                    <div class="form-group col-md-12">
                        <label for="batchName">Batch Name</label>
                        <input type="text" class="form-control" autocomplete="off"
                          formControlName="batchName" name="batchName"
                          [ngClass]="{ 'is-invalid':bifSubmitted && bfi.batchName.errors }">
                    <div *ngIf="bfi.batchName.touched && bfi.batchName.errors ||bifSubmitted" 
                         class="invalid-feedback">
                         <div *ngIf="bfi.batchName.errors">This field is required
                         </div>
                    </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="recipientSet">Recipient Set</label>
                        <ng-multiselect-dropdown  formControlName="recipientSet" name="recipientSet"
                                [placeholder]="'custom placeholder'"
                                [data]="dropdownList"
                                [(ngModel)]="selectedItems"
                                [settings]="dropdownSettings"
                                >
                        </ng-multiselect-dropdown>

                        <!-- <input type="text" class="form-control"
                          formControlName="recipientSet" name="recipientSet" autocomplete="off"
                          [ngClass]="{ 'is-invalid':bifSubmitted && bfi.recipientSet.errors }"> -->
                    <div *ngIf="bfi.recipientSet.touched && bfi.recipientSet.errors ||bifSubmitted" 
                        class="invalid-feedback">
                        <div *ngIf="bfi.recipientSet.errors">This field is required
                        </div>
                   </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="scheduleDate">Schedule Date</label>
                        <input type="text" class="form-control cc-datepicker" autocomplete="off"
                            bsDatepicker formControlName="scheduleDate"
                            name="scheduleDate"
                            [bsConfig]="{ containerClass: 'theme-blue', showWeekNumbers:false }"
                            [ngClass]="{ 'is-invalid':bifSubmitted && bfi.scheduleDate.errors }">
                        <div *ngIf="bfi.scheduleDate.touched && bfi.scheduleDate.errors ||bifSubmitted"
                            class="invalid-feedback">
                            <div *ngIf="bfi.scheduleDate.errors">This field is required
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="aps.closeModel()">Cancel</button>
        <button class="btn btn-primary" (click)="createBatch()">Ok</button>
    </div>
    </form>

</ng-template>